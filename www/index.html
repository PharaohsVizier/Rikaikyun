<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
		<link href="./css/style.css" type="text/css" rel="stylesheet" />
		<link href="./css/screen.css" type="text/css" rel="stylesheet" />
		<link href="./css/ruby.css" type="text/css" rel="stylesheet" />
		<link href="./css/spinner.css" type="text/css" rel="stylesheet" />
		<link href="./css/fileselect/file.css" type="text/css" rel="stylesheet" />
        <title>Rikaikyun</title>
    </head>
    <body>
		<style class="dynamicStyle">
			.container img
			{
				max-height:100%;
			}
			.floater.bottom
			{
				bottom:0;
			}
			.dictionary-container
			{
				max-height:0;
			}
			.img-frame
			{
				width:0;
				height:0;
			}
			
			.gui
			{
			}
			
			ruby
			{
			}
			
			ruby > rt
			{
			}
			
			
		</style>
		<div class="screen reader">
			<div class="scroller">
				<div class="container">
				</div>
			</div>
			<div class="statusBar">
				<div class="grid">
					<div class="col">
						<div class="progress">
							<div class="bar" style="width:0%"></div>
						</div>
					</div>
					<div class="col break"></div>
					<div class="col status">
						<span>1/1</span>
					</div>
					<div class="col break"></div>
				</div>
			</div>
			<div class="floater top">
				<div class="bar top">
					<div class="tab active" data-tab="word"><div class="pad"></div></div>
					<div class="tab" data-tab="name"><div div class="pad"></div></div>
					<div class="tab" data-tab="kanji"><div div class="pad"></div></div>
					<div class="resizer"></div><div class="close"></div>
				</div>
				<div class="dictionary-container">
					<div class="dictionary active" data-tab="word">
						<div class="empty">No words found.</div>
					</div>
					<div class="dictionary" data-tab="name">
						<div class="empty">No names found.</div>
					</div>
					<div class="dictionary" data-tab="kanji">
						<div class="empty">No kanji found.</div>
					</div>
					<div class="dictionary-not-ready">
						<span>Loading dictionaries...</span>
					</div>
				</div>
				<div class="bar bottom">
				</div>
			</div>
		</div>
		<div class="screen scrollable main menu gui">
			<div class="header">Menu</div>
			<div class="item openFile">Load file
				<input type="file"/>
			</div>
			<div class="item settings">Settings</div>
			<div class="item exit">Exit</div>
		</div>
		<div class="screen scrollable settings menu gui" data-screen="settings">
			<div class="header">General setting</div>
			<div class="item checkbox useGpu">
				Use GPU <i></i>
				<div class="description">Using GPU can improve app rendering speed at the cost of battery life.</div>
			</div>
			<div class="item select openMethod" data-system-name="openMethod">
				<span class="name">File opening method</span><i></i>
				<select>
					<option value="AJAX" data-description="AJAX can handle big files, but it might not work on some devices and it might increase startup time.">AJAX</option>
					<option value="FileSystem" data-description="Using file system shortens startup time on some devices, but it can't handle big files (few MB).">File system</option>
				</select>
				<div class="description">
				</div>
			</div>
			<div class="header">Display setting</div>
			<div class="item guiSize" data-system-name="guiSize">
				<span class="name">GUI size:</span><span class="right"><span class="value"></span>%</span>
				<div class="description">Size of graphical user interface (includes all menus). Does not affect dictionary popup and font size in reading mode.</div>
			</div>
			<div class="item slider-control padding" data-system-name="padding">
				<span class="name">Margins:</span><span class="right"><span class="value"></span>%</span><br/>
				<div class="slider" data-min="0" data-max="10" data-step="0.5"></div>
			</div>
			<div class="item slider-control fontSize" data-system-name="fontSize">
				<span class="name">Font size:</span><span class="right"><span class="value"></span>px</span><br/>
				<div class="slider" data-min="5" data-max="80" data-step="1"></div>
			</div>
			<div class="item slider-control lineHeight" data-system-name="lineHeight">
				<span class="name">Line height:</span><span class="right"><span class="value"></span></span><br/>
				<div class="slider" data-min="1" data-max="3" data-step="0.1"></div>
			</div>
			<div class="item select furiganaMode" data-system-name="furiganaMode">
				<span class="name">Furigana mode</span><i></i>
				<select>
					<option value="disabled" data-description="Hides furigana. might increase app's rendering speed.">Disabled</option>
					<option value="inline" data-description="Displays furigana in brackets next to kanji.">Inline</option>
					<option value="default" data-description="Uses viewport's default style for Ruby. Usually renders above, but might resist being styled.">Default</option>
					<option value="above" data-description="Forces furigana to render above, try this option if default rendering fails to achieve the result.">Above</option>
				</select>
				<div class="description">
				</div>
			</div>
			<div class="item slider-control furiganaSize" data-system-name="furiganaSize">
				<span class="name">Furigana size:</span><span class="right"><span class="value"></span>%</span><br/>
				<div class="slider" data-min="10" data-max="100" data-step="1"></div>
			</div>
			<div class="item slider-control furiganaHeight" data-system-name="furiganaHeight">
				<span class="name">Furigana height:</span><span class="right"><span class="value"></span></span><br/>
				<div class="slider" data-min="0.1" data-max="2" data-step="0.1"></div>
			</div>
			<div class="header">Host information</div>
			<div class="item userAgent">
				<span class="name">User agent</span><i></i>
				<div class="description">
				</div>
			</div>
			<!--<div class="header">Hacks</div>
			<div class="item checkbox useGpuHack">Use GPU to force refresh <i></i></div>-->
		</div>
		<div class="screen file gui">
			<div class="files">
			</div>
		</div>
		<div class="screen loading active gui">
			<div class="message">
				<span>
					Loading, please wait...<br/><br/>
					<div class="spinner"></div>
				</span>
			</div>
		</div>
		<div class="blink" style="display:none">
		</div>
        <script type="text/javascript" src="cordova.js"></script>
		<script src="./rikaikun/data.js"></script>
		<script src="./js/jquery/jquery-1.8.3.min.js"></script>
		<script src="./js/jquery-ext/jquery-stylesheet.js"></script>
		<script src="./js/jquery-ext/jquery-absolutezoom.js"></script>
		<!-- <script src="./jquery-privatescroll.js"></script> -->
		<script src="./js/jquery-ext/jquery-fakescroll.js"></script>
		<script src="./js/jquery-ext/jquery-hasattributes.js"></script>
		<script src="./js/jquery-ext/jquery-removeattributes.js"></script>
		<script src="./js/fastclick/fastclick.js"></script>
		<!-- <script src="./js/getWordAtPoint.js"></script> -->
		<script src="./js/extendedMath.js"></script>
		<script src="./js/oop.js"></script>
		<script src="./js/getCharacterAtPoint.js"></script>
		<script src="./js/textCrawler.js"></script>
		<script src="./js/flatterer.js"></script>
		<script src="./js/preloadStyleImages.js"></script>
		<script src="./js/fileSelect.js"></script>
		<script src="./js/slider.js"></script>
		<script src="./js/htmlHelpers.js"></script>
		<script src="./js/fpsCount.js"></script>
		<script src="./js/xxhash/xxhash.lmd.js"></script>
		<script src="./js/app.js"></script>
		<script src="./js/control.js"></script>
		<script src="./js/dropdownControl.js"></script>
		<script src="./js/sliderControl.js"></script>
		<script src="./js/settings.js"></script>
		<script src="./js/reader.js"></script>
		<!-- <script src="./js/encoding.js"></script> -->
        <script type="text/javascript">
			var deviceReady = false;
			function openExternalLink(a)
			{
				// this should prevent PhoneGap from opening external link in its WebView
				window.open(a.href);
				return false;
			}
			function run()
			{
				$(function()
				{
					preloadStyleImages.preload();
					FastClick.attach(document.body);
					var reader = new Reader();//dict);
					// Block context menu (makes the app run less buggy on chrome on desktop)
					$(document.body).on('contextmenu', function(e) { e.preventDefault(); });
					//reader.openFile('genji-01utf.html');
					//reader.openFile('test8.html');
					
					var lastFile = localStorage["lastFile"] || '';
					if (lastFile != '')
					{
						reader.openFile(lastFile);
						//console.log("Open: " + lastFile);
					}
					else
					{
						reader.selectScreen('main.menu');
					}
					//fpsCount.go();
				});
			}
			if (typeof cordova !== 'undefined' || typeof PhoneGap !== 'undefined' || typeof phonegap !== 'undefined')
			{
				document.addEventListener("deviceready", function()
				{
					deviceReady = true;
					run();
				}, false);
			}
			else
			{
				run();
			}
        </script>
    </body>
</html>
